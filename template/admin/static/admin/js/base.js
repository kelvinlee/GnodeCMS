// Generated by CoffeeScript 1.8.0
var post;

$(document).ready(function() {
  $(".sidebar-menu .openable > a").click(function() {
    if (!$("aside").hasClass("sidebar-mini") || Modernizr.mq("(max-width: 991px)")) {
      if ($(this).parent().children(".submenu").is(":hidden")) {
        $(this).parent().siblings().removeClass("open").children(".submenu").slideUp(200);
        $(this).parent().addClass("open").children(".submenu").slideDown(200);
      } else {
        $(this).parent().removeClass("open").children(".submenu").slideUp(200);
      }
    }
    return false;
  });
  if (!$(".sidebar-menu").hasClass("sidebar-mini") || Modernizr.mq("(max-width: 767px)")) {
    $(".openable.open").children(".submenu").slideDown(200);
  }
  $("#btn-collapse").click(function() {
    $(".sidebar-header").toggleClass("active");
  });
  $("#sidebarToggleLG").click(function() {
    if ($(".wrapper").hasClass("display-right")) {
      $(".wrapper").removeClass("display-right");
      $(".sidebar-right").removeClass("active");
    } else {
      $(".top-nav").toggleClass("sidebar-mini");
      $("aside").toggleClass("sidebar-mini");
      $("footer").toggleClass("sidebar-mini");
      $(".main-container").toggleClass("sidebar-mini");
      $(".main-menu").find(".openable").removeClass("open");
      $(".main-menu").find(".submenu").removeAttr("style");
    }
  });
  return $("#sidebarToggleSM").click(function() {
    $("aside").toggleClass("active");
    $(".wrapper").toggleClass("display-left");
  });
});

post = function(form, callback) {
  if (callback == null) {
    callback = null;
  }
  return $.ajax({
    type: "post",
    dataType: "json",
    url: $(form).attr("action"),
    data: $(form).serializeArray(),
    success: function(msg) {
      var type;
      type = "warning";
      if (msg.recode === 201) {
        type = "warning";
      }
      if (msg.recode === 202) {
        type = "information";
      }
      if (msg.recode === 203) {
        type = "error";
      }
      if (msg.recode === 200) {
        type = "success";
      }
      noty({
        text: msg.reason,
        type: type,
        layout: 'topCenter',
        timeout: '3000'
      });
      if (msg.recode === 200 && (callback != null)) {
        return callback(msg);
      }
    }
  });
};
